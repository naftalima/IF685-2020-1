
-- Seu projeto deve ter todos os tipos de consultas abaixo
-- -Group by/Having
-- -Junção interna
-- -Junção externa
-- -Semi junção
-- -Anti-junção
-- -Subconsulta do tipo escalar
-- -Subconsulta do tipo linha
-- -Subconsulta do tipo tabela
-- -Operação de conjunto

-- Atenção: Cada aluno deve fazer ao menos 01 dessas consultas mais 01 procedimento, função ou gatilho. 


-- CIN.TECNICO definition
DROP TABLE TECNICO CASCADE CONSTRAINTS;
DROP TABLE VENDEDOR CASCADE CONSTRAINTS;
DROP TABLE USUARIOS CASCADE CONSTRAINTS;
DROP TABLE EMAIL CASCADE CONSTRAINTS;
DROP TABLE ENDERECO CASCADE CONSTRAINTS;
DROP TABLE COMPRADOR CASCADE CONSTRAINTS;
DROP TABLE LOJA CASCADE CONSTRAINTS;
DROP TABLE PRODUTO CASCADE CONSTRAINTS;
DROP TABLE COMPRAS CASCADE CONSTRAINTS;
DROP TABLE LISTA_DE_DESEJOS CASCADE CONSTRAINTS;

CREATE TABLE "TECNICO" 
   (	"ID" NUMBER(38,0), 
	"NOME" VARCHAR2(100), 
	"CPF" NUMBER(38,0), 
	"IDADE" NUMBER(38,0), 
	"ESPECIALIDADE" VARCHAR2(100), 
	 CONSTRAINT "TECNICO_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "TECNICO_UN" UNIQUE ("CPF")
  USING INDEX  ENABLE
   ) ;

-- CIN.USUARIOS definition

CREATE TABLE "USUARIOS" 
   (	"CPF" NUMBER(38,0), 
	"NOME" VARCHAR2(100), 
	"SEXO" CHAR(1), 
	"DATA_NASCIMENTO" DATE, 
	"QTD_INDICACOES" NUMBER(38,0), 
	"CPF_PADRINHO" NUMBER(38,0), 
	 CONSTRAINT "USUARIOS_PK" PRIMARY KEY ("CPF")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_USUARIOS" FOREIGN KEY ("CPF_PADRINHO")
	  REFERENCES "USUARIOS" ("CPF") ENABLE
   ) ;


-- CIN.EMAIL definition

CREATE TABLE "EMAIL" 
   (	"CPF" NUMBER(38,0), 
	"EMAIL" VARCHAR2(100), 
	 CONSTRAINT "EMAIL_PK" PRIMARY KEY ("CPF", "EMAIL")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_USUARIOS1" FOREIGN KEY ("CPF")
	  REFERENCES "USUARIOS" ("CPF") ENABLE
   ) ;


-- CIN.ENDERECO definition

CREATE TABLE "ENDERECO" 
   (	"CPF" NUMBER(38,0), 
	"RUA" VARCHAR2(100), 
	"BAIRRO" VARCHAR2(100), 
	"CEP" NUMBER(38,0), 
	 CONSTRAINT "ENDERECO_PK" PRIMARY KEY ("CPF", "RUA", "BAIRRO", "CEP")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_USUARIOS2" FOREIGN KEY ("CPF")
	  REFERENCES "USUARIOS" ("CPF") ENABLE
   ) ;



-- CIN.VENDEDOR definition

CREATE TABLE "VENDEDOR" 
   (	"CPF_USUARIO" NUMBER(38,0), 
	"DATA_ENTRADA" DATE, 
	"QTD_VENDAS" NUMBER(38,0), 
	 CONSTRAINT "VENDEDOR_PK" PRIMARY KEY ("CPF_USUARIO")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_USUARIOS3" FOREIGN KEY ("CPF_USUARIO")
	  REFERENCES "USUARIOS" ("CPF") ENABLE
   ) ;


-- CIN.COMPRADOR definition

CREATE TABLE "COMPRADOR" 
   (	"CPF_USUARIO" NUMBER(38,0), 
	"INTERESSES" VARCHAR2(100), 
	"QTD_COMPRAS" NUMBER(38,0), 
	 CONSTRAINT "COMPRADOR_PK" PRIMARY KEY ("CPF_USUARIO")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_USUARIOS4" FOREIGN KEY ("CPF_USUARIO")
	  REFERENCES "USUARIOS" ("CPF") ENABLE
   ) ;



-- CIN.LOJA definition

CREATE TABLE "LOJA" 
   (	"ID" NUMBER(38,0), 
	"CPF_VENDEDOR" NUMBER(38,0), 
	"NOME" VARCHAR2(100) NOT NULL ENABLE, 
	 CONSTRAINT "LOJA_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "LOJA_UN" UNIQUE ("NOME")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_VENDEDOR" FOREIGN KEY ("CPF_VENDEDOR")
	  REFERENCES "VENDEDOR" ("CPF_USUARIO") ENABLE
   ) ;

-- CIN.PRODUTO definition

CREATE TABLE "PRODUTO" 
   (	"ID" NUMBER(38,0), 
	"QUANTIDADE" NUMBER(38,0), 
	"PRECO" FLOAT(126), 
	"NOME" VARCHAR2(100), 
	"ID_LOJA" NUMBER(38,0), 
	 CONSTRAINT "PRODUTO_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_LOJA" FOREIGN KEY ("ID_LOJA")
	  REFERENCES "LOJA" ("ID") ENABLE
   ) ;

-- CIN.COMPRAS definition

CREATE TABLE "COMPRAS" 
   (	"CPF_COMPRADOR" NUMBER(38,0), 
	"ID_PRODUTO" NUMBER(38,0), 
	"HORARIO" TIMESTAMP (6), 
	"ID_TECNICO" NUMBER(38,0), 
	"QTD_PRODUTOS" NUMBER(38,0), 
	"QTD_PARCELAS" NUMBER(38,0), 
	"VALOR_PARCELAS" FLOAT(126), 
	"PRECO" FLOAT(126), 
	"JUROS" FLOAT(126), 
	 CONSTRAINT "COMPRAS_PK" PRIMARY KEY ("CPF_COMPRADOR", "ID_PRODUTO", "HORARIO")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_TECNICO" FOREIGN KEY ("ID_TECNICO")
	  REFERENCES "TECNICO" ("ID") ENABLE, 
	 CONSTRAINT "FK_PRODUTO" FOREIGN KEY ("ID_PRODUTO")
	  REFERENCES "PRODUTO" ("ID") ENABLE, 
	 CONSTRAINT "FK_COMPRADOR" FOREIGN KEY ("CPF_COMPRADOR")
	  REFERENCES "COMPRADOR" ("CPF_USUARIO") ENABLE
   ) ;

-- CIN.LISTA_DE_DESEJOS definition

CREATE TABLE "LISTA_DE_DESEJOS" 
   (	"CPF_COMPRADOR" NUMBER(38,0), 
	"ORDEM" NUMBER(38,0), 
	"NOME" VARCHAR2(100), 
	"QTD_ITENS" NUMBER(38,0), 
	 CONSTRAINT "LISTA_DE_DESEJOS_PK" PRIMARY KEY ("CPF_COMPRADOR", "ORDEM")
  USING INDEX  ENABLE, 
	 CONSTRAINT "FK_COMPRADOR1" FOREIGN KEY ("CPF_COMPRADOR")
	  REFERENCES "COMPRADOR" ("CPF_USUARIO") ENABLE
   ) ;

-----------------------END-CRIACAO-----------------------

INSERT INTO USUARIOS (CPF, NOME, SEXO, DATA_NASCIMENTO, QTD_INDICACOES, CPF_PADRINHO) VALUES(32374108376, 'Harry Potter', 'M', TIMESTAMP '1983-06-12 02:24:46.000000', 0, NULL);
INSERT INTO USUARIOS (CPF, NOME, SEXO, DATA_NASCIMENTO, QTD_INDICACOES, CPF_PADRINHO) VALUES(31165255448, 'Draco Malfoy', 'M', TIMESTAMP '1982-10-03 01:48:13.000000', 0, NULL);
INSERT INTO USUARIOS (CPF, NOME, SEXO, DATA_NASCIMENTO, QTD_INDICACOES, CPF_PADRINHO) VALUES(28439660510, 'Hermione Granger', 'F', TIMESTAMP '1991-11-16 09:57:29.000000', 0, NULL);
INSERT INTO USUARIOS (CPF, NOME, SEXO, DATA_NASCIMENTO, QTD_INDICACOES, CPF_PADRINHO) VALUES(81885242042, 'Luna Lovegood', 'F', TIMESTAMP '1990-12-06 11:37:31.000000', 0, NULL);
INSERT INTO USUARIOS (CPF, NOME, SEXO, DATA_NASCIMENTO, QTD_INDICACOES, CPF_PADRINHO) VALUES(55161574550, 'Minerva McGonagall', 'F', TIMESTAMP '1995-08-20 11:17:58.000000', 0, NULL);

INSERT INTO ENDERECO (CPF, RUA, BAIRRO, CEP) VALUES(32374108376,'Rua Marechal Hermes', 'Brasília Teimosa', 51010-240);
INSERT INTO ENDERECO (CPF, RUA, BAIRRO, CEP) VALUES(31165255448,'Rua Califórnia', 'Brejo de Beberibe', 52191-075);
INSERT INTO ENDERECO (CPF, RUA, BAIRRO, CEP) VALUES(28439660510,'Rua Jornalista Cleofas de Oliveira', 'Imbiribeira', 51200-140);
INSERT INTO ENDERECO (CPF, RUA, BAIRRO, CEP) VALUES(81885242042,'Rua Florentino Olímpio dos Santos', 'Afogados', 50830-470);
INSERT INTO ENDERECO (CPF, RUA, BAIRRO, CEP) VALUES(55161574550,'Rua Trapiá', 'Vasco da Gama', 52280-502);

INSERT INTO EMAIL (CPF, EMAIL) VALUES(32374108376, 'harry_potter@gmail.com');
INSERT INTO EMAIL (CPF, EMAIL) VALUES(31165255448, 'draco_malfoy@gmail.com');
INSERT INTO EMAIL (CPF, EMAIL) VALUES(28439660510, 'hermione_granger@gmail.com');
INSERT INTO EMAIL (CPF, EMAIL) VALUES(81885242042, 'luna_lovegood@gmail.com');
INSERT INTO EMAIL (CPF, EMAIL) VALUES(55161574550, 'minerva_mcgonagall@gmail.com');

-- PARENT KEY NOT FOUND

INSERT INTO COMPRADOR (CPF_USUARIO, INTERESSES, QTD_COMPRAS) VALUES(31165255448, 'Quidditch', 1);
INSERT INTO COMPRADOR (CPF_USUARIO, INTERESSES, QTD_COMPRAS) VALUES(32374108376, 'Quidditch', 1);

INSERT INTO VENDEDOR (CPF_USUARIO, DATA_ENTRADA, QTD_VENDAS) VALUES(81885242042, TIMESTAMP '2021-05-21 02:24:46.000000', 0);
INSERT INTO VENDEDOR (CPF_USUARIO, DATA_ENTRADA, QTD_VENDAS) VALUES(32374108376, TIMESTAMP '2021-04-21 02:24:46.000000', 1);
INSERT INTO VENDEDOR (CPF_USUARIO, DATA_ENTRADA, QTD_VENDAS) VALUES(31165255448, TIMESTAMP '2021-04-21 02:24:46.000000', 1);

INSERT INTO LOJA (ID, CPF_VENDEDOR, NOME) VALUES(1, 32374108376, 'Quality Quidditch Supplies');
INSERT INTO LOJA (ID, CPF_VENDEDOR, NOME) VALUES(2, 81885242042, 'Weasleys Wizard Wheezes');
INSERT INTO LOJA (ID, CPF_VENDEDOR, NOME) VALUES(3, 31165255448, 'Dark Arts establishments');

INSERT INTO TECNICO (ID, NOME, CPF, IDADE, ESPECIALIDADE) VALUES(1, 'Rubeus Hagrid', 28831632515, 35, 'Magical Creatures');
INSERT INTO TECNICO (ID, NOME, CPF, IDADE, ESPECIALIDADE) VALUES(2, 'Severus Snape', 69554143133, 30, 'Potions');
INSERT INTO TECNICO (ID, NOME, CPF, IDADE, ESPECIALIDADE) VALUES(3, 'Dobi', 08182259921, 19, 'Transmutation');

INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(1, 700, 2.99, 'Dungbomb', 2);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(2, 100, 49.9, 'Jinx-Off', 2);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(3, 500, 20.5, 'Demon Dung', 2);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(4, 10, 290.9, 'Nimbus 2001', 1);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(5, 5, 500.9, 'Firebolt', 1);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(6, 100, 10.4, 'Quaffles', 1);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(7, 50, 100.0, 'Quidditch Starter Kits', 1);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(8, 1, 300.58, 'Hand of Glory', 3);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(9, 1, 120.6, 'Opal Necklace', 3);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(10, 7, 1000.2, 'Horcrux', 3);
INSERT INTO PRODUTO (ID, QUANTIDADE, PRECO, NOME, ID_LOJA) VALUES(11, 200, 5.7, 'Cursed books', 3);

INSERT INTO LISTA_DE_DESEJOS (CPF_COMPRADOR, ORDEM, NOME, QTD_ITENS) VALUES(31165255448, 1, 'Revenge', 2);
INSERT INTO LISTA_DE_DESEJOS (CPF_COMPRADOR, ORDEM, NOME, QTD_ITENS) VALUES(28439660510, 1, 'Study', 10);
INSERT INTO LISTA_DE_DESEJOS (CPF_COMPRADOR, ORDEM, NOME, QTD_ITENS) VALUES(32374108376, 1, 'Quidditch', 2);
INSERT INTO LISTA_DE_DESEJOS (CPF_COMPRADOR, ORDEM, NOME, QTD_ITENS) VALUES(32374108376, 2, 'Fun', 4);

INSERT INTO COMPRAS (CPF_COMPRADOR, ID_PRODUTO, HORARIO, ID_TECNICO, QTD_PRODUTOS, QTD_PARCELAS, VALOR_PARCELAS, PRECO, JUROS) 
VALUES(31165255448, 9, TIMESTAMP '1983-06-12 18:13:12.000000', 2, 1, 1, 120.6, 120.6, 0);
INSERT INTO COMPRAS (CPF_COMPRADOR, ID_PRODUTO, HORARIO, ID_TECNICO, QTD_PRODUTOS, QTD_PARCELAS, VALOR_PARCELAS, PRECO, JUROS) 
VALUES(32374108376, 5, TIMESTAMP '1983-06-12 18:13:12.000000', 2, 1, 1, 500.9, 500.9, 0);
INSERT INTO COMPRAS (CPF_COMPRADOR, ID_PRODUTO, HORARIO, ID_TECNICO, QTD_PRODUTOS, QTD_PARCELAS, VALOR_PARCELAS, PRECO, JUROS) 
VALUES(31165255448, 4, TIMESTAMP '1983-08-02 18:15:12.000000', 1, 1, 1, 290.9, 290.9, 0);
INSERT INTO COMPRAS (CPF_COMPRADOR, ID_PRODUTO, HORARIO, ID_TECNICO, QTD_PRODUTOS, QTD_PARCELAS, VALOR_PARCELAS, PRECO, JUROS) 
VALUES(32374108376, 8, TIMESTAMP '1983-08-21 18:16:12.000000', 2, 2, 1, 300.58, 300.58, 0);






